Creating a micro-frontend using React + Vite

Creating a micro frontend typically involves two main parts:

Host Application: This is the primary application that users interact with. It serves as the container for the micro frontends.

Remote Application: These are the micro frontends themselves, which act as building blocks for the host application.

Setting Up the Host App
To create a host application using Vite and React, run the following command:
# Using npm 6.x
npm create vite@latest host-app --template react

# Using npm 7+, add an extra double-dash:
npm create vite@latest host-app -- --template react

Setting Up the Remote App
For the remote application, execute the following command:
npm create vite@latest todo-components -- --template react

This will create two folders, host-app and todo-components. Next, install the dependencies for both apps:
npm install

Creating Components in the Remote App




Previewing the Remote App
To preview the components, run the following command in the todo-components app:
npm run dev
You should see the following output.

Remote App Preview

Adding Module Federation to the Remote App
Now, let's add Module Federation to the todo-components app. First, install the necessary dependencies:
npm install @originjs/vite-plugin-federation --save-dev
Next, configure Module Federation in the vite.config.js file:
// vite.config.js in todo-components
import { defineConfig } from "vite";
import react from "@vitejs/plugin-react";
import federation from "@originjs/vite-plugin-federation";

export default defineConfig({
  plugins: [
    react(),
    federation({
      name: "todo-components",
      filename: "remoteEntry.js",
      exposes: {
        "./List": "./src/components/List.jsx",
        "./Input": "./src/components/Input.jsx",
      },
      shared: ["react"],
    }),
  ],
  build: {
    modulePreload: false,
    target: "esnext",
    minify: false,
    cssCodeSplit: false,
  },
});
In this configuration:

name: Specifies the name of the remote app.
filename: Sets the name of the file generated by Module Federation.
exposes: Lists the components to expose from the remote app.
shared: Declares shared dependencies, such as React, to optimize the bundle size.
Now, build the remote app:
npm run build
This generates a dist folder in the todo-components app containing a remoteEntry.js file.

Serving the Remote App
Serve the remote app locally:
npx serve dist
This serves the remote app on port 3000.

Adding Module Federation to the Host App
To use the remote app components in the host app, set up Module Federation in the vite.config.js file of the host app:
// vite.config.js in host-app
import { defineConfig } from "vite";
import react from "@vitejs/plugin-react";
import federation from "@originjs/vite-plugin-federation";

export default defineConfig({
  plugins: [
    react(),
    federation({
      name: "host-app",
      remotes: {
        todo_components: "http://localhost:3000/assets/remoteEntry.js",
      },
      shared: ["react"],
    }),
  ],
  build: {
    modulePreload: false,
    target: "esnext",

    minify: false,
    cssCodeSplit: false,
  },
});
In this configuration:

name: Specifies the name of the host app.
remotes: Lists the remote apps to be used by the host app. In this case, we have one remote app, "todo_components," and we provide the URL of its remoteEntry.js file.
shared: Declares shared dependencies, such as React, to optimize the bundle size.
Using Remote Components in the Host App
Now, you can import and use the remote app components in the host app's App.jsx:

Here, we import the components from the remote app using the specified remote name, "todo_components."

Serving the Host App
To serve the host app locally, run:
npm run dev
Now, you should see that the components from the remote app are being used seamlessly in the host app.

Conclusion
In this article, we've explored the concept of Micro Frontends and demonstrated how to create a micro frontend architecture using Vite and React, enhanced with Module Federation. By leveraging the power of Vite's fast build times and Module Federation's dynamic code loading capabilities, you can efficiently develop and scale web applications in a modular and maintainable way. This approach empowers multiple teams to work on different parts of the app independently, promoting flexibility and agility in front-end development.

For further exploration and to apply these concepts to your own projects, feel free to adapt and expand upon the examples provided here. Micro Frontends, when used judiciously, can significantly streamline your web development workflow.
